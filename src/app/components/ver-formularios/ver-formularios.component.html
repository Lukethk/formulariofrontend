<div class="min-h-screen bg-gray-50 py-8">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold text-gray-900 mb-2">📋 Ver Necesidades - Brigadas de Bomberos</h1>
      <p class="text-gray-600">Gestiona y revisa las solicitudes de equipamiento y suministros de las brigadas</p>
    </div>

    <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">🔍 Buscar</label>
          <input type="text" 
                 [(ngModel)]="filtroBusqueda"
                 placeholder="Brigada, encargado..." 
                 class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">🚒 Brigada</label>
          <input type="text" 
                 [(ngModel)]="filtroBrigada"
                 placeholder="Nombre de brigada..." 
                 class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">📊 Estado</label>
          <select [(ngModel)]="filtroEstado" 
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent">
            <option value="">Todos los estados</option>
            <option value="pendiente">⏳ Pendiente</option>
            <option value="en_revision">🔍 En Revisión</option>
            <option value="aprobado">✅ Aprobado</option>
            <option value="rechazado">❌ Rechazado</option>
          </select>
        </div>
      </div>
      
      <div class="flex justify-between items-center mt-4">
        <button (click)="aplicarFiltros()" 
                class="bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors duration-200">
          🔍 Aplicar Filtros
        </button>
        <button (click)="limpiarFiltros()" 
                class="px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors duration-200">
          🔄 Limpiar Filtros
        </button>
      </div>
    </div>

    <div class="bg-white rounded-lg shadow-sm overflow-hidden">
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                📅 Fecha
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                🚒 Brigada
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                👥 Bomberos
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                📞 Contacto
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                🛡️ Total EPP
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                📊 Estado
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                ⚙️ Acciones
              </th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <ng-container *ngIf="formulariosPaginados.length > 0; else noFormularios">
              <tr *ngFor="let formulario of formulariosPaginados" class="hover:bg-gray-50">
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                  {{ formulario.fechaCreacion | date:'dd/MM/yyyy' }}
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium text-gray-900">{{ formulario.brigada_nombre }}</div>
                  <div class="text-sm text-gray-500">Brigada</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                  Brigada activa
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-900">Sistema</div>
                  <div class="text-sm text-gray-500">Centralizado</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                    {{ calcularTotalEPP(formulario) }} items
                  </span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <span [ngClass]="obtenerEstadoClass(formulario.estado)" 
                        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium">
                    {{ obtenerEstadoLabel(formulario.estado) }}
                  </span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <div class="flex space-x-2">
                    <button (click)="verFormulario(formulario)" 
                            class="text-blue-600 hover:text-blue-900 transition-colors duration-200">
                      👁️ Ver
                    </button>
                    <button (click)="editarFormulario(formulario)" 
                            class="text-green-600 hover:text-green-900 transition-colors duration-200">
                      ✏️ Editar
                    </button>
                  </div>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </div>

      <ng-template #noFormularios>
        <div class="text-center py-12">
          <div class="text-gray-400 text-6xl mb-4">📋</div>
          <h3 class="text-lg font-medium text-gray-900 mb-2">No se encontraron formularios</h3>
          <p class="text-gray-500">No hay formularios de necesidades que coincidan con los filtros aplicados.</p>
        </div>
      </ng-template>
    </div>

    <div class="bg-white rounded-lg shadow-sm p-4 mt-6">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-2">
          <span class="text-sm text-gray-700">
            Mostrando {{ (paginaActual - 1) * elementosPorPagina + 1 }} a 
            {{ Math.min(paginaActual * elementosPorPagina, totalElementos) }} de 
            {{ totalElementos }} resultados
          </span>
        </div>
        
        <div class="flex items-center space-x-2">
          <button (click)="cambiarPagina(paginaActual - 1)" 
                  [disabled]="paginaActual === 1"
                  class="px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
            ← Anterior
          </button>
          
          <div class="flex items-center space-x-1">
            <ng-container *ngFor="let pagina of generarArrayPaginas()">
              <button *ngIf="esPaginaValida(pagina)" 
                      (click)="cambiarPagina(pagina)" 
                      [class]="'px-3 py-2 text-sm font-medium rounded-md ' + 
                      (pagina === paginaActual 
                        ? 'bg-red-600 text-white' 
                        : 'border border-gray-300 text-gray-700 hover:bg-gray-50')">
                {{ pagina }}
              </button>
              <span *ngIf="!esPaginaValida(pagina)" 
                    class="px-3 py-2 text-sm text-gray-500">
                {{ pagina }}
              </span>
            </ng-container>
          </div>
          
          <button (click)="cambiarPagina(paginaActual + 1)" 
                  [disabled]="paginaActual === totalPaginas"
                  class="px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
            Siguiente →
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
